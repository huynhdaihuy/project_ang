<div class="form-wrapper">
  <h3 class="text-center fw-bold fs-3">Edit information of recipe</h3>
  <div class="d-flex justify-content-end">
    <mat-icon (click)="closePromp()">close</mat-icon>
  </div>
  <form (ngSubmit)="onSubmit()" *ngIf="updateData">
    <div class="row">
      <div class="col form-group">
        <label>Title</label>
        <input
          name="title"
          type="text"
          class="form-control"
          [(ngModel)]="updateData.title"
          required
          minlength="3"
        />
        <div class="col form-group">
          <label>Description</label>
          <textarea
            name="description"
            class="form-control"
            cols="30"
            rows="8"
            [(ngModel)]="updateData.description"
          ></textarea>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label>Price</label>
      <input
        type="number"
        class="form-control"
        name="price"
        [(ngModel)]="updateData.price"
      />
    </div>
    <div class="row">
      <div class="col-sm-6 form-group">
        <label>Time</label>
        <input
          type="text"
          class="form-control"
          name="time"
          [(ngModel)]="updateData.time"
        />
      </div>
      <div class="col-sm-6 form-group">
        <label>Hardness</label>
        <input
          type="text"
          class="form-control"
          name="hardness"
          [(ngModel)]="updateData.hardness"
        />
      </div>
    </div>

    <div class="form-group">
      <label>Method</label>
      <select
        class="form-control"
        name="method"
        [(ngModel)]="updateData.method"
      >
        <option value="grill">Grill</option>
        <option value="roast">Roast</option>
        <option value="fry">Fry</option>
        <option value="bake">Bake</option>
      </select>
    </div>
    <div class="form-group">
      <div class="heading-section">
        <label>Ingredients</label>
        <span
          *ngIf="editIngredientMode; else notEditIngredientBtn"
          class="text-btn text-danger"
          (click)="editIngredientMode = false"
          >Cancel</span
        >
        <ng-template #notEditIngredientBtn></ng-template>
        <span class="text-btn" (click)="editIngredientMode = true">Edit</span>
      </div>
      <div
        class="item-list"
        *ngFor="let ingredient of data!.ingredients; let i = index"
      >
        <span *ngIf="editIngredientMode; else notEditIngredientContent">
          <input
            [name]="'ingredent-name' + i"
            [(ngModel)]="data!.ingredients[i].name"
            placeholder="Ingredient name"
          />
          <input
            [name]="'ingredent-quantity' + i"
            [(ngModel)]="data!.ingredients[i].quantity"
            placeholder="Quantity"
          />
        </span>
        <ng-template #notEditIngredientContent>
          <span class="content"
            >{{ ingredient.name }} - {{ ingredient.quantity }}</span
          >
        </ng-template>
      </div>
    </div>
    <div class="form-group">
      <div class="heading-section">
        <label>Instructions</label>
        <span
          *ngIf="editInstructionMode; else notEditInstructionBtn"
          class="text-btn text-danger"
          (click)="editInstructionMode = false"
          >Cancel</span
        >
        <ng-template #notEditInstructionBtn></ng-template>
        <span class="text-btn" (click)="editInstructionMode = true">Edit</span>
      </div>
      <div
        class="item-list"
        *ngFor="let instruction of data!.instructions; let i = index"
      >
        <span *ngIf="editIngredientMode; else notEditInstructionContent">
          <input
            [name]="'ingredent-name' + i"
            [(ngModel)]="data!.instructions[i]"
            placeholder="Instruction for cooking"
          />
        </span>
        <ng-template #notEditInstructionContent>
          <span class="content">Step {{ i + 1 }} {{ instruction }}</span>
        </ng-template>
      </div>
    </div>
    <button type="submit" class="btn btn-secondary">Submit</button>
  </form>
</div>
